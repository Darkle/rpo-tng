import _arrayFromIterator from"./_arrayFromIterator.js";import _includesWith from"./_includesWith.js";import _functionName from"./_functionName.js";import _has from"./_has.js";import _objectIs from"./_objectIs.js";import keys from"../keys.js";import type from"../type.js";function _uniqContentEquals(e,a,r,t){var n=_arrayFromIterator(e),s=_arrayFromIterator(a);function o(e,a){return _equals(e,a,r.slice(),t.slice())}return!_includesWith((function(e,a){return!_includesWith(o,a,e)}),s,n)}export default function _equals(e,a,r,t){if(_objectIs(e,a))return!0;var n=type(e);if(n!==type(a))return!1;if(null==e||null==a)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof a["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](a)&&"function"==typeof a["fantasy-land/equals"]&&a["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof a.equals)return"function"==typeof e.equals&&e.equals(a)&&"function"==typeof a.equals&&a.equals(e);switch(n){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===_functionName(e.constructor))return e===a;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof a||!_objectIs(e.valueOf(),a.valueOf()))return!1;break;case"Date":if(!_objectIs(e.valueOf(),a.valueOf()))return!1;break;case"Error":return e.name===a.name&&e.message===a.message;case"RegExp":if(e.source!==a.source||e.global!==a.global||e.ignoreCase!==a.ignoreCase||e.multiline!==a.multiline||e.sticky!==a.sticky||e.unicode!==a.unicode)return!1}for(var s=r.length-1;s>=0;){if(r[s]===e)return t[s]===a;s-=1}switch(n){case"Map":return e.size===a.size&&_uniqContentEquals(e.entries(),a.entries(),r.concat([e]),t.concat([a]));case"Set":return e.size===a.size&&_uniqContentEquals(e.values(),a.values(),r.concat([e]),t.concat([a]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var o=keys(e);if(o.length!==keys(a).length)return!1;var u=r.concat([e]),c=t.concat([a]);for(s=o.length-1;s>=0;){var i=o[s];if(!_has(i,a)||!_equals(a[i],e[i],u,c))return!1;s-=1}return!0}